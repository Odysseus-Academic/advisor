generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Group {
  id         Int      @id
  hash       String?  @unique
  type       Boolean? // AND: 0, OR: 1
  coreqs     String?
  course     Course[]
  // Implicit many-many relation
  requires   Group[]  @relation("GroupReqs") // pre
  requiredBy Group[]  @relation("GroupReqs") // pos
}

model Course {
  id                String    @id
  subject           String
  code              String
  level             Int
  title             String?
  repeatability     String?
  description       String?
  pathways          String?
  hours             String?
  sections          Section[]
  group             Group     @relation(fields: [groupId], references: [id])
  groupId           Int
  crosslist         Course[]  @relation("Crosslist")
  // We don't use this field, it's just for prisma
  crosslistSymetric Course[]  @relation("Crosslist")
}

model Section {
  id        Int     @id @default(autoincrement())
  semester  String?
  gradeData String?

  course   Course @relation(fields: [courseId], references: [id])
  courseId String

  instructor   Instructor @relation(fields: [instructorId], references: [id])
  instructorId Int
}

model Instructor {
  id       Int       @id @default(autoincrement())
  name     String
  rating   String?
  sections Section[]
}
